# MCP-RS Test Suite

## ğŸ“‹ ãƒ†ã‚¹ãƒˆæ§‹æˆæ¦‚è¦

æ–°ã—ãæ•´ç†ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆã§ã¯ã€æ©Ÿèƒ½åˆ¥ãƒ»ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥ã«ãƒ†ã‚¹ãƒˆã‚’åˆ†é¡ã—ã€ä¿å®ˆæ€§ã¨å®Ÿè¡ŒåŠ¹ç‡ã‚’å‘ä¸Šã•ã›ã¦ã„ã¾ã™ã€‚

## ğŸ“ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

```
tests/
â”œâ”€â”€ README.md                    # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ mod.rs                       # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©
â”œâ”€â”€ unit/                        # å˜ä½“ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ config_tests.rs         # è¨­å®šã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ handler_tests.rs        # ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ¬ã‚¸ã‚¹ãƒˆãƒª
â”‚   â”œâ”€â”€ runtime_tests.rs        # ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â””â”€â”€ transport_tests.rs      # é€šä¿¡ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”œâ”€â”€ integration/                 # çµ±åˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ session_management.rs   # ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â”œâ”€â”€ plugin_system.rs        # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â”œâ”€â”€ policy_management.rs    # ãƒãƒªã‚·ãƒ¼ç®¡ç†ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â””â”€â”€ rollback_system.rs      # ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”œâ”€â”€ database/                    # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹é–¢é€£
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ engine_tests.rs         # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â”œâ”€â”€ handler_tests.rs        # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â””â”€â”€ security_tests.rs       # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”œâ”€â”€ wordpress/                   # WordPressçµ±åˆ
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ api_tests.rs            # WordPress APIï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â”œâ”€â”€ content_tests.rs        # ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â”œâ”€â”€ media_tests.rs          # ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”‚   â””â”€â”€ security_tests.rs       # WordPress ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ï¼ˆç§»è¡Œäºˆå®šï¼‰
â”œâ”€â”€ canary/                      # ã‚«ãƒŠãƒªãƒ¼ãƒ‡ãƒ—ãƒ­ã‚¤
â”‚   â”œâ”€â”€ mod.rs
â”‚   â””â”€â”€ deployment_tests.rs     # ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆï¼ˆç§»è¡Œäºˆå®šï¼‰
â”œâ”€â”€ performance/                 # ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ database_benchmarks.rs  # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ âœ…
â”‚   â””â”€â”€ memory_benchmarks.rs    # ãƒ¡ãƒ¢ãƒªãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ï¼ˆäºˆå®šï¼‰
â”œâ”€â”€ fixtures/                    # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ mod.rs
â”‚   â”œâ”€â”€ test_data.rs           # ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆäºˆå®šï¼‰
â”‚   â””â”€â”€ mock_services.rs       # ãƒ¢ãƒƒã‚¯ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆäºˆå®šï¼‰
â””â”€â”€ [legacy files]              # æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆæ®µéšçš„ç§»è¡Œä¸­ï¼‰
    â”œâ”€â”€ session_current_tests.rs
    â”œâ”€â”€ rollback_tests.rs
    â”œâ”€â”€ integration_tests.rs
    â”œâ”€â”€ plugin_integration_tests.rs
    â”œâ”€â”€ plugin_system_integration_tests.rs
    â”œâ”€â”€ policy_hot_reload_integration.rs
    â”œâ”€â”€ basic_session_tests.rs
    â””â”€â”€ simple_tests.rs          # â¡ï¸ unit/ ã«åˆ†å‰²æ¸ˆã¿
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ–¹æ³•

### å…¨ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
cargo test
```

### ã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
```bash
# å˜ä½“ãƒ†ã‚¹ãƒˆ
cargo test unit::

# çµ±åˆãƒ†ã‚¹ãƒˆ
cargo test integration::

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ
cargo test database::

# WordPressãƒ†ã‚¹ãƒˆ  
cargo test wordpress::

# ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆãƒªãƒªãƒ¼ã‚¹ãƒ¢ãƒ¼ãƒ‰æ¨å¥¨ï¼‰
cargo test performance:: --release

# ã‚«ãƒŠãƒªãƒ¼ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ†ã‚¹ãƒˆ
cargo test canary::
```

### å€‹åˆ¥ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å®Ÿè¡Œ
```bash
# è¨­å®šãƒ†ã‚¹ãƒˆ
cargo test unit::config_tests

# ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ†ã‚¹ãƒˆ
cargo test unit::handler_tests

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
cargo test performance::database_benchmarks --release
```

## ğŸ“Š ç¾åœ¨ã®ãƒ†ã‚¹ãƒˆçŠ¶æ³

### âœ… ç§»è¡Œå®Œäº†
- **å˜ä½“ãƒ†ã‚¹ãƒˆ**: config_tests, handler_tests, runtime_tests, transport_tests
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**: database_benchmarks

### ğŸš§ ç§»è¡Œäºˆå®š
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã€ãƒãƒªã‚·ãƒ¼ç®¡ç†ã€ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ**: ã‚¨ãƒ³ã‚¸ãƒ³ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **WordPressãƒ†ã‚¹ãƒˆ**: APIã€ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€ãƒ¡ãƒ‡ã‚£ã‚¢ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
- **ã‚«ãƒŠãƒªãƒ¼ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ†ã‚¹ãƒˆ**: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½

### ğŸ“ˆ ãƒ†ã‚¹ãƒˆå®Ÿè¡Œçµæœ
- **ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ†ã‚¹ãƒˆ**: 131/131 (130 passed, 1 ignored)
- **çµ±åˆãƒ†ã‚¹ãƒˆ**: 4/4 passed
- **å®Ÿè¡Œæ™‚é–“**: ~0.20s (lib), ~0.00s (integration)

## ğŸ”„ ç§»è¡Œè¨ˆç”»

### Phase 1: åŸºæœ¬æ§‹é€  âœ…
- [x] æ–°ã—ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ä½œæˆ
- [x] ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
- [x] å˜ä½“ãƒ†ã‚¹ãƒˆã®åˆ†å‰²ã¨ç§»è¡Œ

### Phase 2: ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç§»è¡Œï¼ˆé€²è¡Œä¸­ï¼‰
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´ç†ã¨ç§»è¡Œ
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆã®çµ±åˆ
- [ ] WordPressãƒ†ã‚¹ãƒˆã®æ•´ç†

### Phase 3: é‡è¤‡é™¤å»ã¨æœ€é©åŒ–
- [ ] é‡è¤‡ãƒ†ã‚¹ãƒˆã®å‰Šé™¤
- [ ] ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“ã®æœ€é©åŒ–
- [ ] CI/CDã¨ã®çµ±åˆ

### Phase 4: å®Œäº†ã¨æ–‡æ›¸åŒ–
- [ ] ãƒ¬ã‚¬ã‚·ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã®å‰Šé™¤
- [ ] ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰ã®å®Œæˆ
- [ ] ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã®ç¢ºç«‹

## ğŸ¯ è¨­è¨ˆåŸå‰‡

1. **æ˜ç¢ºãªåˆ†é›¢**: æ©Ÿèƒ½åˆ¥ãƒ»ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¥ã®æ˜ç¢ºãªåˆ†é¡
2. **å®Ÿè¡ŒåŠ¹ç‡**: ã‚«ãƒ†ã‚´ãƒªåˆ¥å®Ÿè¡Œã«ã‚ˆã‚‹é«˜é€ŸåŒ–
3. **ä¿å®ˆæ€§**: ä¸€è²«ã—ãŸå‘½åè¦å‰‡ã¨æ§‹é€ 
4. **æ‹¡å¼µæ€§**: æ–°æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã®è¿½åŠ ã—ã‚„ã™ã•
5. **CI/CDå¯¾å¿œ**: æ®µéšçš„ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã«ã‚ˆã‚‹æœ€é©åŒ–

---

**æ¬¡ã®ç›®æ¨™**: çµ±åˆãƒ†ã‚¹ãƒˆã¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆã®ç§»è¡Œå®Œäº†